# 10.EIGRP Authentication Lab

Hi there ðŸ˜Š

In this lab we are diving into **EIGRP authentication**, a critical feature that ensures routing information exchanged between neighbors is trusted and not tampered with. 
This lab will also demonstrate the importance of consistent authentication settings, explore how classic and named modes differ, and give you a full verification and troubleshooting workflow.  

![Topology](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/01.Topology.png)

---

## Why EIGRP Authentication Matters

By default, EIGRP does not authenticate its routing updates. Any device that joins the subnet and runs EIGRP with the correct AS number can become a neighbor, potentially injecting false routes. Authentication prevents this by requiring each neighbor to prove its identity using a shared secret key.

There are two ways to enable EIGRP authentication:

* **Classic mode**: The traditional EIGRP configuration style, tied to an autonomous system number with commands under `router eigrp <ASN>`. Authentication is configured on interfaces with a key-chain.  
* **Named mode**: A more modern approach, introduced to consolidate configuration. It uses address families (`address-family ipv4 unicast autonomous-system <ASN>`) and allows authentication and other policies to be managed under `af-interface`.

---

## Key Chain Configuration

Before enabling authentication, we need a key chain. This is a container that holds one or more keys. The keys can be rotated to update passwords without dropping adjacency.

```
key chain Our_Chain
 key 3456
  key-string Cisco!23
 exit
exit
````

**Explanation:**

* `key chain Our_Chain` creates a key chain named *Our_Chain*.
* `key 3456` specifies the key ID. Both neighbors must use the same key ID.
* `key-string Cisco!23` sets the shared secret. Both sides must match.

---

## Classic EIGRP Authentication (R1â€“R4)

Routers R1, Core1, R2, R3, and R4 will use the classic EIGRP configuration style.

### R1

```
router eigrp 1
 network 10.0.19.0 0.0.0.255
 network 10.0.13.0 0.0.0.255
exit

interface range g0/0-1
 ip authentication key-chain eigrp 1 Our_Chain
 ip authentication mode eigrp 1 md5
exit
```

**Explanation:**

* `router eigrp 1` starts EIGRP in AS 1.
* `network` commands tell EIGRP which interfaces to run on.
* Under each interface, we apply MD5 authentication using the *Our_Chain* key chain.

### Core1

```
router eigrp 1
 network 10.0.19.0 0.0.0.255
 network 10.0.29.0 0.0.0.255
exit

interface range g0/0-1
 ip authentication key-chain eigrp 1 Our_Chain
 ip authentication mode eigrp 1 md5
exit
```

### R2

```
router eigrp 1
 network 10.0.29.0 0.0.0.255
 network 10.0.24.0 0.0.0.255
exit

interface range g0/0-1
 ip authentication key-chain eigrp 1 Our_Chain
 ip authentication mode eigrp 1 md5
exit
```

### R3

```
router eigrp 1
 network 10.0.13.0 0.0.0.255
 network 10.0.34.0 0.0.0.255
 network 10.1.35.0 0.0.0.255
exit

interface range g0/0-2
 ip authentication key-chain eigrp 1 Our_Chain
 ip authentication mode eigrp 1 md5
exit
```

### R4

```
router eigrp 1
 network 10.0.24.0 0.0.0.255
 network 10.0.34.0 0.0.0.255
 network 10.2.46.0 0.0.0.255
exit

interface range g0/0-2
 ip authentication key-chain eigrp 1 Our_Chain
 ip authentication mode eigrp 1 md5
exit
```

---

## Named EIGRP Authentication (R5â€“R8)

Routers R5, R6, R7, and R8 use named EIGRP configuration. Authentication is applied under `af-interface`.

### R5

```
router eigrp My_Named_EIGRP
 address-family ipv4 unicast autonomous-system 1
  network 10.1.35.0 0.0.0.255
  network 10.1.57.0 0.0.0.255
  af-interface default
   authentication mode md5
   authentication key-chain Our_Chain
  exit
 exit
```

### R6

```
router eigrp My_Named_EIGRP
 address-family ipv4 unicast autonomous-system 1
  network 10.2.46.0 0.0.0.255
  network 10.2.68.0 0.0.0.255
  af-interface default
   authentication mode md5
   authentication key-chain Our_Chain
  exit
 exit
```

### R7

```
router eigrp My_Named_EIGRP
 address-family ipv4 unicast autonomous-system 1
  network 10.1.57.0 0.0.0.255
  af-interface default
   authentication mode md5
   authentication key-chain Our_Chain
  exit
 exit
```

### R8

```
router eigrp My_Named_EIGRP
 address-family ipv4 unicast autonomous-system 1
  network 10.2.68.0 0.0.0.255
  af-interface default
   authentication mode md5
   authentication key-chain Our_Chain
  exit
 exit
```

---

## Verification

After configuring authentication, we must confirm neighbors come up and exchange routes correctly.

### Check neighbors

```
show ip eigrp neighbors
```
![show ip eigrp neighbors](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/02.Show%20eigrp%20neighbors.png)

*Shows the list of EIGRP neighbors and their adjacency state.*
**Expected outcome:** All routers should show neighbors in the `FULL` state.

### Check interfaces

```
show ip eigrp interfaces detail
```
![show ip eigrp interfaces detail](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/03.show%20interfaces%20details.png)

*Shows which interfaces are running EIGRP and whether authentication is enabled.*
**Expected outcome:** Each interface should list MD5 authentication as enabled.

### Check routes

```
show ip route eigrp
```
![show ip route eigrp](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/04.show%20ip%20route.png)

*Verifies that EIGRP-learned routes are present in the routing table.*
**Expected outcome:** Routes from other routers appear as `D` entries.

### Check configuration

```
show running-config | section eigrp
```
![show running-config | section eigrp](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/05.running-config.png)

*Confirms that authentication commands are applied correctly in the running config.*
**Expected outcome:** Each interface should show `ip authentication` lines or named-mode `authentication mode md5`.

### Check key chain

```
show key chain
```
![show key chain](https://github.com/RouteSeeker/CCNP_Security/blob/main/assets/screenshots/10.EIGRP%20Authentication/06.key%20chain.png)

*Displays configured key chains and their states.*
**Expected outcome:** Key `3456` should be listed under `Our_Chain`.

---

## Troubleshooting

If neighbors fail to form:

* **Key ID mismatch:** Ensure both ends use `key 3456`.
* **Wrong key-string:** Both sides must use the same secret (`Cisco!23`).
* **Interface not covered:** Verify the correct interface has `ip authentication` enabled.
* **AS mismatch:** Classic mode must match the AS number; named mode must reference the correct autonomous system under `address-family`.
* **Partial configuration:** Check both key-chain and `ip authentication` are present.

---

## Best Practices

* Use **MD5 or stronger** authentication methods.
* **Rotate keys regularly** using multiple key IDs. Add a new key ID before retiring the old one to avoid adjacency drops.
* Keep **key strings secure** and avoid reusing them across environments.
* Always **document which links are secured** and ensure both sides of each link match configuration.

---

## Summary

In this lab we configured and verified EIGRP authentication across a multi-router topology. We:

* Used classic EIGRP with MD5 authentication on R1 through R4.
* Used named EIGRP with MD5 authentication on R5 through R8.
* Applied key-chain based authentication with the same key ID and string across all peers.
* Verified neighbors, interfaces, routes, and key chains.
* Explored troubleshooting steps for common failures.
* Learned best practices for key rotation and secure deployment.

This lab provided a clear view of how authentication secures EIGRP and highlighted the operational differences between classic and named configurations.

